replicas: 2

image:
  repository: "opensearchstaging/opensearch"
  tag: "3.0.0-beta1"
  pullPolicy: "Always"

opensearchJavaOpts: "-Xmx4G -Xms4G"
resources:
  requests:
    cpu: "4"
    memory: "8Gi"

# Enabling this will publically expose your OpenSearch instance.
# Only enable this if you have security enabled on your cluster
ingress:
  enabled: false
  # For Kubernetes >= 1.18 you should specify the ingress-controller via the field ingressClassName
  # See https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/#specifying-the-class-of-an-ingress

  annotations: {}

  path: /
  hosts:
    - chart-example.local
  tls: []

securityConfig:
  config:
    data:
      config.yml: |
        _meta:
          type: "config"
          config_version: 2
        config:
          dynamic:
            http:
              anonymous_auth_enabled: true
      roles.yml: |
        _meta:
          type: "roles"
          config_version: 2
        kibana_read_only:
          reserved: true
        security_rest_api_access:
          reserved: true
        alerting_read_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/alerting/alerts/get"
          - "cluster:admin/opendistro/alerting/destination/get"
          - "cluster:admin/opendistro/alerting/destination/email_group/search"
          - "cluster:admin/opendistro/alerting/destination/email_account/search"
          - "cluster:admin/opendistro/alerting/monitor/get"
          - "cluster:admin/opendistro/alerting/monitor/search"
        alerting_ack_alerts:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/alerting/alerts/*"
        alerting_full_access:
          reserved: true
          cluster_permissions:
          - "cluster_monitor"
          - "cluster:admin/opendistro/alerting/*"
          index_permissions:
          - index_patterns:
            - "*"
            allowed_actions:
            - "indices_monitor"
            - "indices:admin/aliases/get"
            - "indices:admin/mappings/get"
        anomaly_read_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/ad/detector/info"
          - "cluster:admin/opendistro/ad/detector/search"
          - "cluster:admin/opendistro/ad/detectors/get"
          - "cluster:admin/opendistro/ad/result/search"
          - "cluster:admin/opendistro/ad/tasks/search"
          - "cluster:admin/opendistro/ad/detector/validate"
          - "cluster:admin/opendistro/ad/result/topAnomalies"
        anomaly_full_access:
          reserved: true
          cluster_permissions:
          - "cluster_monitor"
          - "cluster:admin/opendistro/ad/*"
          index_permissions:
          - index_patterns:
            - "*"
            allowed_actions:
            - "indices_monitor"
            - "indices:admin/aliases/get"
            - "indices:admin/mappings/get"
        notebooks_read_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/notebooks/list"
          - "cluster:admin/opendistro/notebooks/get"
        notebooks_full_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/notebooks/create"
          - "cluster:admin/opendistro/notebooks/update"
          - "cluster:admin/opendistro/notebooks/delete"
          - "cluster:admin/opendistro/notebooks/get"
          - "cluster:admin/opendistro/notebooks/list"
        observability_read_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opensearch/observability/get"
          - "cluster:admin/opensearch/ppl"
        observability_full_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opensearch/observability/create"
          - "cluster:admin/opensearch/observability/update"
          - "cluster:admin/opensearch/observability/delete"
          - "cluster:admin/opensearch/observability/get"
        reports_instances_read_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/reports/instance/list"
          - "cluster:admin/opendistro/reports/instance/get"
          - "cluster:admin/opendistro/reports/menu/download"
        reports_read_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/reports/definition/get"
          - "cluster:admin/opendistro/reports/definition/list"
          - "cluster:admin/opendistro/reports/instance/list"
          - "cluster:admin/opendistro/reports/instance/get"
          - "cluster:admin/opendistro/reports/menu/download"
        reports_full_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/reports/definition/create"
          - "cluster:admin/opendistro/reports/definition/update"
          - "cluster:admin/opendistro/reports/definition/on_demand"
          - "cluster:admin/opendistro/reports/definition/delete"
          - "cluster:admin/opendistro/reports/definition/get"
          - "cluster:admin/opendistro/reports/definition/list"
          - "cluster:admin/opendistro/reports/instance/list"
          - "cluster:admin/opendistro/reports/instance/get"
          - "cluster:admin/opendistro/reports/menu/download"
        asynchronous_search_full_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/asynchronous_search/*"
          index_permissions:
          - index_patterns:
            - "*"
            allowed_actions:
            - "indices:data/read/search*"
        asynchronous_search_read_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/asynchronous_search/get"
        index_management_full_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opendistro/ism/*"
          - "cluster:admin/opendistro/rollup/*"
          - "cluster:admin/opendistro/transform/*"
          index_permissions:
          - index_patterns:
            - "*"
            allowed_actions:
            - "indices:admin/opensearch/ism/*"
        cross_cluster_replication_leader_full_access:
          reserved: true
          index_permissions:
          - index_patterns:
            - "*"
            allowed_actions:
            - "indices:admin/plugins/replication/index/setup/validate"
            - "indices:data/read/plugins/replication/changes"
            - "indices:data/read/plugins/replication/file_chunk"
        cross_cluster_replication_follower_full_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/plugins/replication/autofollow/update"
          index_permissions:
          - index_patterns:
            - "*"
            allowed_actions:
            - "indices:admin/plugins/replication/index/setup/validate"
            - "indices:data/write/plugins/replication/changes"
            - "indices:admin/plugins/replication/index/start"
            - "indices:admin/plugins/replication/index/pause"
            - "indices:admin/plugins/replication/index/resume"
            - "indices:admin/plugins/replication/index/stop"
            - "indices:admin/plugins/replication/index/update"
            - "indices:admin/plugins/replication/index/status_check"
        ml_read_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/openserach/ml/stats"
          - "cluster:admin/opensearch/ml/models/get"
          - "cluster:admin/opensearch/ml/models/search"
          - "cluster:admin/opensearch/ml/tasks/get"
          - "cluster:admin/opensearch/ml/tasks/search"
        notifications_read_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opensearch/notifications/configs/get"
          - "cluster:admin/opensearch/notifications/features"
          - "cluster:admin/opensearch/notifications/channels/get"
        snapshot_management_read_access:
          reserved: true
          cluster_permissions:
          - "cluster:admin/opensearch/snapshot_management/policy/get"
          - "cluster:admin/opensearch/snapshot_management/policy/search"
          - "cluster:admin/opensearch/snapshot_management/policy/explain"
          - "cluster:admin/repository/get"
          - "cluster:admin/snapshot/get"
        ml_full_access:
          reserved: true
          cluster_permissions:
          - "cluster_monitor"
          - "cluster:admin/opensearch/ml/*"
          index_permissions:
          - index_patterns:
            - "*"
            allowed_actions:
            - "indices_monitor"
        opendistro_security_anonymous_role:
          reserved: true
          cluster_permissions:
          - "cluster:monitor/state"
          - "cluster:monitor/health"
          - "cluster:monitor/nodes/info"
          - "cluster:admin/opendistro/ism/policy/search"
          - "cluster:admin/opendistro/ism/managedindex/explain"
          - "cluster:admin/opendistro/rollup/search"
          - "cluster:admin/opendistro/transform/get_transforms"
          - "cluster:admin/opensearch/ml/profile/nodes"
          - "cluster:admin/opendistro/rollup/explain"
          - "cluster:admin/opendistro/ism/policy/get"
          - "cluster:admin/opendistro/rollup/get"
          - "cluster:admin/opendistro/transform/explain"
          - "cluster:admin/opendistro/transform/get"
          - "cluster:admin/opensearch/ml/trainAndPredict"
          - "cluster:admin/opensearch/ml/connectors/search"
          - "cluster:admin/opensearch/ml/predict"
          - "cluster:admin/opensearch/securityanalytics/rule/search"
          - "cluster:admin/opensearch/securityanalytics/detector/search"
          - "cluster:admin/opensearch/securityanalytics/findings/get"
          - "cluster:admin/opensearch/securityanalytics/alerts/get"
          - "cluster:admin/opensearch/securityanalytics/detector/get"
          - "indices:data/read/scroll*"
          - "cluster:admin/opensearch/flow_framework/workflow/search"
          - "cluster:monitor/main"
          - "cluster:admin/opensearch/flow_framework/workflow_state/search"
          index_permissions:
          - index_patterns:
            - ".kibana"
            - ".kibana-6"
            - ".kibana_*"
            - ".opensearch_dashboards"
            - ".opensearch_dashboards-6"
            - ".opensearch_dashboards_*"
            allowed_actions:
            - "read"
          - index_patterns:
            - ".tasks"
            - ".management-beats"
            - "*:.tasks"
            - "*:.management-beats"
            allowed_actions:
            - "read"
          - index_patterns:
            - "opensearch_dashboards_sample_data_logs"
            - "opensearch_dashboards_sample_data_flights"
            - "opensearch_dashboards_sample_data_ecommerce"
            allowed_actions:
            - "read"
          - index_patterns:
            - "*"
            allowed_actions:
            - "read"
            - "indices:data/read/mget"
            - "indices:data/read/msearch"
            - "indices:data/read/mtv"
            - "indices:admin/get"
            - "indices:admin/aliases/exists*"
            - "indices:admin/aliases/get*"
            - "indices:admin/mappings/get"
            - "indices:data/read/scroll"
            - "indices:monitor/settings/get"
            - "indices:monitor/stats"
          tenant_permissions:
          - tenant_patterns:
            - "*"
            allowed_actions:
            - "kibana_all_read"
        google_users_role:
          reserved: false
          cluster_permissions:
          - "cluster:monitor/state"
          - "cluster:monitor/health"
          - "cluster:monitor/nodes/info"
          - "cluster:admin/script/put"
          - "cluster:admin/opendistro/ism/policy/search"
          - "cluster:admin/opendistro/ism/managedindex/explain"
          - "cluster:admin/opendistro/rollup/search"
          - "cluster:admin/opendistro/transform/get_transforms"
          - "cluster:admin/opendistro/rollup/explain"
          - "cluster:admin/opendistro/ism/policy/get"
          - "cluster:admin/opendistro/rollup/get"
          - "cluster:admin/opendistro/transform/explain"
          - "cluster:admin/opendistro/transform/get"
          - "cluster:admin/opensearch/securityanalytics/rule/search"
          - "cluster:admin/opensearch/securityanalytics/detector/search"
          - "cluster:admin/opensearch/securityanalytics/findings/get"
          - "cluster:admin/opensearch/securityanalytics/alerts/get"
          - "cluster:admin/opensearch/securityanalytics/detector/get"
          - "indices:data/read/scroll*"
          - "cluster:admin/opensearch/observability/create"
          - "cluster:admin/opensearch/observability/update"
          - "cluster:admin/opensearch/observability/get"
          - "cluster:admin/opensearch/ml/trainAndPredict"
          index_permissions:
          - index_patterns:
            - ".kibana"
            - ".kibana-6"
            - ".kibana_*"
            - ".opensearch_dashboards"
            - ".opensearch_dashboards-6"
            - ".opensearch_dashboards_*"
            allowed_actions:
            - "read"
          - index_patterns:
            - ".tasks"
            - ".management-beats"
            - "*:.tasks"
            - "*:.management-beats"
            allowed_actions:
            - "read"
          - index_patterns:
            - "opensearch_dashboards_sample_data_logs"
            - "opensearch_dashboards_sample_data_flights"
            - "opensearch_dashboards_sample_data_ecommerce"
            allowed_actions:
            - "*"
          - index_patterns:
            - "*"
            allowed_actions:
            - "read"
            - "indices:data/read/mget"
            - "indices:data/read/msearch"
            - "indices:data/read/mtv"
            - "indices:data/write*"
            - "indices:admin/create"
            - "indices:admin/analyze"
            - "indices:admin/get"
            - "indices:admin/aliases/exists*"
            - "indices:admin/aliases/get*"
            - "indices:admin/mappings/get"
            - "indices:monitor/settings/get"
            - "indices:monitor/stats"
          tenant_permissions:
          - tenant_patterns:
            - "*"
            allowed_actions:
            - "kibana_all_read"
      roles_mapping.yml: |
        asynchronous_search_read_access:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []
        opendistro_security_anonymous_role:
          hosts: []
          users: []
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []
        observability_read_access:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []
        ml_read_access:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []
        own_index:
          hosts: []
          users:
          - "*"
          reserved: false
          hidden: false
          backend_roles: []
          and_backend_roles: []
          description: "Allow full access to an index named like the username"
        kibana_user:
          hosts: []
          users:
          - "zctest"
          reserved: false
          hidden: false
          backend_roles:
          - "kibanauser"
          and_backend_roles: []
        snapshot_management_read_access:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []
        _meta:
          type: "rolesmapping"
          config_version: 2
        reports_read_access:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []
        all_access:
          hosts: []
          users: []
          reserved: false
          hidden: false
          backend_roles:
          - "admin"
          - "arn:aws:iam::711387115897:role/Admin"
          and_backend_roles: []
        anomaly_read_access:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []
        alerting_read_access:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []
        reports_instances_read_access:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []
        readall:
          hosts: []
          users: []
          reserved: false
          hidden: false
          backend_roles:
          - "readall"
          and_backend_roles: []
        manage_snapshots:
          hosts: []
          users: []
          reserved: false
          hidden: false
          backend_roles:
          - "snapshotrestore"
          and_backend_roles: []
        logstash:
          hosts: []
          users: []
          reserved: false
          hidden: false
          backend_roles:
          - "logstash"
          and_backend_roles: []
        google_users_role:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "kibanauser"
          and_backend_roles: []
        notifications_read_access:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []
        kibana_server:
          hosts: []
          users:
          - "kibanaserver"
          reserved: true
          hidden: false
          backend_roles: []
          and_backend_roles: []
        notebooks_read_access:
          hosts: []
          users:
          - "*@gmail.com"
          reserved: false
          hidden: false
          backend_roles:
          - "opendistro_security_anonymous_backendrole"
          and_backend_roles: []